<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ethan Ding</title>
    <link rel="icon" type="image/png" href="/images/profile.png" />
    <link rel="stylesheet" crossorigin href="/assets/index-dwlculdd.css">
    <style>
      /* Additional styles for the static version */
      .container {
        max-width: 600px;
        margin: 0 auto;
        padding: 3rem 1.5rem;
      }
      .header {
        margin-bottom: 4rem;
      }
      .profile-section {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 0.5rem;
      }
      .profile-img {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        object-fit: cover;
      }
      h1 {
        font-size: 1.125rem;
        font-weight: 500;
      }
      h2 {
        font-size: 0.875rem;
        font-weight: normal;
        color: #666;
        margin: 0.25rem 0;
      }
      h2 a {
        color: #000;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.2s;
      }
      h2 a:hover {
        color: #666;
        text-decoration: underline;
      }
      .reading-section {
        margin-bottom: 4rem;
      }
      .reading-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
      }
      .reading-header h3 {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
        font-weight: 500;
      }
      .reading-pace {
        font-size: 0.875rem;
        color: #666;
        margin-bottom: 1.5rem;
      }
      .books-container {
        margin-top: 1.5rem;
      }
      .books-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
      }
      .book-card {
        border: 1px solid #eaeaea;
        border-radius: 8px;
        padding: 1rem;
        background: #fff;
        transition: box-shadow 0.2s;
      }
      .book-card:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }
      .book-title {
        font-weight: 500;
        font-size: 0.95rem;
        margin-bottom: 0.5rem;
        line-height: 1.3;
      }
      .book-author {
        font-size: 0.875rem;
        color: #666;
        margin-bottom: 0.5rem;
      }
      .book-dates {
        font-size: 0.813rem;
        color: #999;
      }
      .loading {
        text-align: center;
        padding: 2rem;
        color: #666;
      }
      footer {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 2rem;
        margin-top: 4rem;
      }
      .social-links {
        display: flex;
        gap: 1rem;
      }
      .social-link {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: #f5f5f5;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.2s;
        color: #000;
      }
      .social-link:hover {
        background: #e5e5e5;
      }
      .location-button {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        background: none;
        border: none;
        padding: 0.5rem;
        color: #666;
        font-size: 0.875rem;
        cursor: pointer;
      }
      .location-button:hover {
        color: #000;
      }
    </style>
  </head>
  <body>
    <main class="container">
      <div class="header">
        <div class="profile-section">
          <img src="/images/profile.png" alt="Ethan Ding" class="profile-img" />
          <h1>Ethan Ding</h1>
        </div>
        <h2>I am the Cofounder & CEO of <a href="https://textql.com/" target="_blank" rel="noopener noreferrer">TextQL</a></h2>
        <h2>Previously: <span><a href="https://bvp.com/" target="_blank" rel="noopener noreferrer">Bessemer</a>, </span><span><a href="https://tackle.io/" target="_blank" rel="noopener noreferrer">Tackle</a></span></h2>
        <h2><a href="https://mandate.beehiiv.com/p/the-next-trillion-dollar-company" target="_blank" rel="noopener noreferrer">Learn what I'm building</a></h2>
      </div>
      
      <section class="reading-section">
        <div class="reading-header">
          <h3>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"/>
            </svg>
            What I'm Reading
          </h3>
        </div>
        <p class="reading-pace">Current pace: <span id="book-count">58</span> books in the past 365 days</p>
        <div class="books-container">
          <div id="books-list" class="loading">Loading books...</div>
        </div>
      </section>
      
      <footer>
        <div class="social-links">
          <a href="https://twitter.com/theethanding" target="_blank" rel="noopener noreferrer" aria-label="Twitter" class="social-link">
            <svg width="16" height="16" viewBox="0 0 24 24">
              <path fill="currentColor" d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path>
            </svg>
          </a>
          <a href="mailto:ethan@textql.co" target="_blank" rel="noopener noreferrer" aria-label="Email" class="social-link">
            <svg width="16" height="16" viewBox="0 0 24 24">
              <path fill="currentColor" d="M1.5 8.67v8.58a3 3 0 003 3h15a3 3 0 003-3V8.67l-8.928 5.493a3 3 0 01-3.144 0L1.5 8.67z"></path>
              <path fill="currentColor" d="M22.5 6.908V6.75a3 3 0 00-3-3h-15a3 3 0 00-3 3v.158l9.714 5.978a1.5 1.5 0 001.572 0L22.5 6.908z"></path>
            </svg>
          </a>
          <a href="https://linkedin.com/in/theethanding" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" class="social-link">
            <svg width="16" height="16" viewBox="0 0 24 24">
              <path fill="currentColor" d="M20.5 2h-17A1.5 1.5 0 002 3.5v17A1.5 1.5 0 003.5 22h17a1.5 1.5 0 001.5-1.5v-17A1.5 1.5 0 0020.5 2zM8 19H5v-9h3zM6.5 8.25A1.75 1.75 0 118.3 6.5a1.78 1.78 0 01-1.8 1.75zM19 19h-3v-4.74c0-1.42-.6-1.93-1.38-1.93A1.74 1.74 0 0013 14.19a.66.66 0 000 .14V19h-3v-9h2.9v1.3a3.11 3.11 0 012.7-1.4c1.55 0 3.36.86 3.36 3.66z"></path>
            </svg>
          </a>
        </div>
        <button class="location-button">
          <svg viewBox="0 0 14 14" fill="currentColor" width="14" height="14">
            <path d="M7 0C4.1 0 1.8 2.3 1.8 5.2c0 3.9 5.2 8.8 5.2 8.8s5.2-4.9 5.2-8.8C12.2 2.3 9.9 0 7 0zm0 7.8c-1.4 0-2.6-1.2-2.6-2.6S5.6 2.6 7 2.6s2.6 1.2 2.6 2.6S8.4 7.8 7 7.8z"></path>
          </svg>
          Made in New York
        </button>
      </footer>
    </main>
    <script>
      // Fetch all books from Airtable API and display them
      async function fetchAndDisplayBooks() {
        try {
          const baseId = 'appp0rlDg8bs8FlVB';
          const tableId = 'tblLzVsk6YxiQ0xxE';
          const viewId = 'viw7ZSeTTduvLSsKX';
          const token = 'pat7ufqR4W0PzZw7m.3743b667a61b9956e108549aa613b4e23af8b95a718e016e77bde446cb2291c3';
          
          let allRecords = [];
          let offset = null;
          
          // Fetch all pages of records
          do {
            const url = offset 
              ? `https://api.airtable.com/v0/${baseId}/${tableId}?view=${viewId}&offset=${offset}`
              : `https://api.airtable.com/v0/${baseId}/${tableId}?view=${viewId}`;
              
            const response = await fetch(url, {
              headers: {
                'Authorization': `Bearer ${token}`
              }
            });
            
            if (response.ok) {
              const data = await response.json();
              allRecords = allRecords.concat(data.records);
              offset = data.offset;
            } else {
              throw new Error('Failed to fetch books');
            }
          } while (offset);
          
          // Update book count
          document.getElementById('book-count').textContent = allRecords.length;
          
          // Create book list HTML
          const booksContainer = document.getElementById('books-list');
          
          if (allRecords.length === 0) {
            booksContainer.innerHTML = '<p>No books found.</p>';
            return;
          }
          
          // Create grid of book cards
          const booksHTML = allRecords.map(record => {
            const fields = record.fields;
            const title = fields.Book ? fields.Book.trim() : 'Untitled';
            const authors = fields.Author ? fields.Author.join(', ') : 'Unknown Author';
            const dateStarted = fields['Date Started'] || '';
            const dateFinished = fields['Date Finished'] || '';
            const daysText = fields['Days Taken'] ? `${fields['Days Taken']} days` : '';
            
            let dateText = '';
            if (dateFinished) {
              dateText = `Finished ${formatDate(dateFinished)}`;
              if (daysText) dateText += ` (${daysText})`;
            } else if (dateStarted) {
              dateText = `Started ${formatDate(dateStarted)}`;
            }
            
            return `
              <div class="book-card">
                <div class="book-title">${escapeHtml(title)}</div>
                <div class="book-author">${escapeHtml(authors)}</div>
                <div class="book-dates">${escapeHtml(dateText)}</div>
              </div>
            `;
          }).join('');
          
          booksContainer.innerHTML = `<div class="books-grid">${booksHTML}</div>`;
          
        } catch (error) {
          console.error('Error fetching books:', error);
          document.getElementById('books-list').innerHTML = 
            '<p>Unable to load books. <a href="https://airtable.com/embed/shrvFfepLidSzTkeI?backgroundColor=cyan&layout=card&viewControls=on" target="_blank">View on Airtable</a></p>';
        }
      }
      
      // Helper function to format dates
      function formatDate(dateStr) {
        const date = new Date(dateStr);
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        return `${months[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`;
      }
      
      // Helper function to escape HTML
      function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
      }
      
      // Fetch books when page loads
      fetchAndDisplayBooks();
    </script>
  </body>
</html>